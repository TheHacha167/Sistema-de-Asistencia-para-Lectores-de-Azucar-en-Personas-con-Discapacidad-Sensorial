<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" data-diagram-type="SEQUENCE" height="787px" preserveAspectRatio="none" style="width:329px;height:787px;background:#1B1B1B;" version="1.1" viewBox="0 0 329 787" width="329px" zoomAndPan="magnify"><title>7.1.4 Secuencia: SMS Bidireccional</title><defs/><g><rect fill="#1B1B1B" height="787" style="stroke:none;stroke-width:1;" width="329" x="0" y="0"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="275.9463" x="28.3479" y="27.9951">7.1.4 Secuencia: SMS Bidireccional</text><rect fill="none" height="75.3984" style="stroke:#FFFFFF;stroke-width:1.5;" width="263.6421" x="40" y="90.5938"/><rect fill="none" height="394.2656" style="stroke:#FFFFFF;stroke-width:1.5;" width="313.6421" x="10" y="179.9922"/><rect fill="none" height="363.1328" style="stroke:#FFFFFF;stroke-width:1.5;" width="293.6421" x="20" y="204.125"/><rect fill="none" height="289.8672" style="stroke:#FFFFFF;stroke-width:1.5;" width="273.6421" x="30" y="270.3906"/><rect fill="none" height="116.2031" style="stroke:#FFFFFF;stroke-width:1.5;" width="147.5728" x="40" y="437.0547"/><rect fill="none" height="146.6641" style="stroke:#FFFFFF;stroke-width:1.5;" width="263.6421" x="40" y="588.2578"/><g><title>ESP32</title><rect fill="#000000" fill-opacity="0.00000" height="678.3281" width="8" x="74.9946" y="73.5938"/><line style="stroke:#E7E7E7;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="78" x2="78" y1="73.5938" y2="751.9219"/></g><g><title>SIM800L</title><rect fill="#000000" fill-opacity="0.00000" height="678.3281" width="8" x="252.834" y="73.5938"/><line style="stroke:#E7E7E7;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="256.0259" x2="256.0259" y1="73.5938" y2="751.9219"/></g><g class="participant participant-head" data-participant="ESP"><rect fill="#222222" height="30.2969" rx="2.5" ry="2.5" style="stroke:#E7E7E7;stroke-width:0.5;" width="57.9893" x="50" y="42.2969"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="43.9893" x="57" y="62.292">ESP32</text></g><g class="participant participant-tail" data-participant="ESP"><rect fill="#222222" height="30.2969" rx="2.5" ry="2.5" style="stroke:#E7E7E7;stroke-width:0.5;" width="57.9893" x="50" y="750.9219"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="43.9893" x="57" y="770.917">ESP32</text></g><g class="participant participant-head" data-participant="MDM"><rect fill="#222222" height="30.2969" rx="2.5" ry="2.5" style="stroke:#E7E7E7;stroke-width:0.5;" width="73.6162" x="220.0259" y="42.2969"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="59.6162" x="227.0259" y="62.292">SIM800L</text></g><g class="participant participant-tail" data-participant="MDM"><rect fill="#222222" height="30.2969" rx="2.5" ry="2.5" style="stroke:#E7E7E7;stroke-width:0.5;" width="73.6162" x="220.0259" y="750.9219"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="59.6162" x="227.0259" y="770.917">SIM800L</text></g><path d="M40,90.5938 L180.0815,90.5938 L180.0815,97.7266 L170.0815,107.7266 L40,107.7266 L40,90.5938" fill="#555555" style="stroke:#FFFFFF;stroke-width:1.5;"/><rect fill="none" height="75.3984" style="stroke:#FFFFFF;stroke-width:1.5;" width="263.6421" x="40" y="90.5938"/><text fill="#FFFFFF" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="95.0815" x="55" y="103.6606">Inicializaci&#243;n</text><g class="message" data-participant-1="ESP" data-participant-2="MDM"><polygon fill="#E7E7E7" points="244.834,124.8594,254.834,128.8594,244.834,132.8594,248.834,128.8594" style="stroke:#E7E7E7;stroke-width:1;"/><line style="stroke:#E7E7E7;stroke-width:1;" x1="78.9946" x2="250.834" y1="128.8594" y2="128.8594"/><text fill="#FFFFFF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="84.7349" x="85.9946" y="123.7935">AT+CMGF=1</text></g><g class="message" data-participant-1="ESP" data-participant-2="MDM"><polygon fill="#E7E7E7" points="244.834,153.9922,254.834,157.9922,244.834,161.9922,248.834,157.9922" style="stroke:#E7E7E7;stroke-width:1;"/><line style="stroke:#E7E7E7;stroke-width:1;" x1="78.9946" x2="250.834" y1="157.9922" y2="157.9922"/><text fill="#FFFFFF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="130.3555" x="85.9946" y="152.9263">AT+CNMI=2,1,0,0,0</text></g><path d="M10,179.9922 L166.1919,179.9922 L166.1919,187.125 L156.1919,197.125 L10,197.125 L10,179.9922" fill="#555555" style="stroke:#FFFFFF;stroke-width:1.5;"/><rect fill="none" height="394.2656" style="stroke:#FFFFFF;stroke-width:1.5;" width="313.6421" x="10" y="179.9922"/><text fill="#FFFFFF" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="111.1919" x="25" y="193.0591">Recepci&#243;n SMS</text><path d="M20,204.125 L96.624,204.125 L96.624,211.2578 L86.624,221.2578 L20,221.2578 L20,204.125" fill="#555555" style="stroke:#FFFFFF;stroke-width:1.5;"/><rect fill="none" height="363.1328" style="stroke:#FFFFFF;stroke-width:1.5;" width="293.6421" x="20" y="204.125"/><text fill="#FFFFFF" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="31.624" x="35" y="217.1919">loop</text><g class="message" data-participant-1="ESP" data-participant-2="ESP"><line style="stroke:#E7E7E7;stroke-width:1;stroke-dasharray:2.0,2.0;" x1="78.9946" x2="120.9946" y1="242.3906" y2="242.3906"/><line style="stroke:#E7E7E7;stroke-width:1;stroke-dasharray:2.0,2.0;" x1="120.9946" x2="120.9946" y1="242.3906" y2="255.3906"/><line style="stroke:#E7E7E7;stroke-width:1;stroke-dasharray:2.0,2.0;" x1="79.9946" x2="120.9946" y1="255.3906" y2="255.3906"/><polygon fill="#E7E7E7" points="89.9946,251.3906,79.9946,255.3906,89.9946,259.3906,85.9946,255.3906" style="stroke:#E7E7E7;stroke-width:1;"/><text fill="#FFFFFF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="64.4668" x="85.9946" y="237.3247">leer UART</text></g><path d="M30,270.3906 L94.4429,270.3906 L94.4429,277.5234 L84.4429,287.5234 L30,287.5234 L30,270.3906" fill="#555555" style="stroke:#FFFFFF;stroke-width:1.5;"/><rect fill="none" height="289.8672" style="stroke:#FFFFFF;stroke-width:1.5;" width="273.6421" x="30" y="270.3906"/><text fill="#FFFFFF" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="19.4429" x="45" y="283.4575">alt</text><text fill="#FFFFFF" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="96.4541" x="109.4429" y="282.6011">[evento +CMTI]</text><g class="message" data-participant-1="ESP" data-participant-2="MDM"><polygon fill="#E7E7E7" points="244.834,304.6563,254.834,308.6563,244.834,312.6563,248.834,308.6563" style="stroke:#E7E7E7;stroke-width:1;"/><line style="stroke:#E7E7E7;stroke-width:1;" x1="78.9946" x2="250.834" y1="308.6563" y2="308.6563"/><text fill="#FFFFFF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="119.3613" x="85.9946" y="303.5903">AT+CMGR=&lt;idx&gt;</text></g><g class="message" data-participant-1="MDM" data-participant-2="ESP"><polygon fill="#E7E7E7" points="89.9946,333.7891,79.9946,337.7891,89.9946,341.7891,85.9946,337.7891" style="stroke:#E7E7E7;stroke-width:1;"/><line style="stroke:#E7E7E7;stroke-width:1;stroke-dasharray:2.0,2.0;" x1="83.9946" x2="255.834" y1="337.7891" y2="337.7891"/><text fill="#FFFFFF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="126.6992" x="95.9946" y="332.7231">+CMGR: datos SMS</text></g><g class="message" data-participant-1="ESP" data-participant-2="ESP"><line style="stroke:#E7E7E7;stroke-width:1;stroke-dasharray:2.0,2.0;" x1="78.9946" x2="120.9946" y1="366.9219" y2="366.9219"/><line style="stroke:#E7E7E7;stroke-width:1;stroke-dasharray:2.0,2.0;" x1="120.9946" x2="120.9946" y1="366.9219" y2="379.9219"/><line style="stroke:#E7E7E7;stroke-width:1;stroke-dasharray:2.0,2.0;" x1="79.9946" x2="120.9946" y1="379.9219" y2="379.9219"/><polygon fill="#E7E7E7" points="89.9946,375.9219,79.9946,379.9219,89.9946,383.9219,85.9946,379.9219" style="stroke:#E7E7E7;stroke-width:1;"/><text fill="#FFFFFF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="163.8394" x="85.9946" y="361.856">parsear &lt;from&gt;, &lt;msg&gt;</text></g><g class="message" data-participant-1="ESP" data-participant-2="ESP"><line style="stroke:#E7E7E7;stroke-width:1;stroke-dasharray:2.0,2.0;" x1="78.9946" x2="120.9946" y1="409.0547" y2="409.0547"/><line style="stroke:#E7E7E7;stroke-width:1;stroke-dasharray:2.0,2.0;" x1="120.9946" x2="120.9946" y1="409.0547" y2="422.0547"/><line style="stroke:#E7E7E7;stroke-width:1;stroke-dasharray:2.0,2.0;" x1="79.9946" x2="120.9946" y1="422.0547" y2="422.0547"/><polygon fill="#E7E7E7" points="89.9946,418.0547,79.9946,422.0547,89.9946,426.0547,85.9946,422.0547" style="stroke:#E7E7E7;stroke-width:1;"/><text fill="#FFFFFF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="126.6802" x="85.9946" y="403.9888">remitente_valido()?</text></g><path d="M40,437.0547 L104.4429,437.0547 L104.4429,444.1875 L94.4429,454.1875 L40,454.1875 L40,437.0547" fill="#555555" style="stroke:#FFFFFF;stroke-width:1.5;"/><rect fill="none" height="116.2031" style="stroke:#FFFFFF;stroke-width:1.5;" width="147.5728" x="40" y="437.0547"/><text fill="#FFFFFF" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="19.4429" x="55" y="450.1216">alt</text><text fill="#FFFFFF" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="47.6201" x="119.4429" y="449.2651">[v&#225;lido]</text><g class="message" data-participant-1="ESP" data-participant-2="ESP"><line style="stroke:#E7E7E7;stroke-width:1;stroke-dasharray:2.0,2.0;" x1="78.9946" x2="120.9946" y1="475.3203" y2="475.3203"/><line style="stroke:#E7E7E7;stroke-width:1;stroke-dasharray:2.0,2.0;" x1="120.9946" x2="120.9946" y1="475.3203" y2="488.3203"/><line style="stroke:#E7E7E7;stroke-width:1;stroke-dasharray:2.0,2.0;" x1="79.9946" x2="120.9946" y1="488.3203" y2="488.3203"/><polygon fill="#E7E7E7" points="89.9946,484.3203,79.9946,488.3203,89.9946,492.3203,85.9946,488.3203" style="stroke:#E7E7E7;stroke-width:1;"/><text fill="#FFFFFF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="89.5781" x="85.9946" y="470.2544">clasificar msg</text></g><line style="stroke:#FFFFFF;stroke-width:1;stroke-dasharray:2.0,2.0;" x1="40" x2="187.5728" y1="497.3203" y2="497.3203"/><text fill="#FFFFFF" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="59.2217" x="45" y="507.5308">[inv&#225;lido]</text><g class="message" data-participant-1="ESP" data-participant-2="ESP"><line style="stroke:#E7E7E7;stroke-width:1;stroke-dasharray:2.0,2.0;" x1="78.9946" x2="120.9946" y1="532.2578" y2="532.2578"/><line style="stroke:#E7E7E7;stroke-width:1;stroke-dasharray:2.0,2.0;" x1="120.9946" x2="120.9946" y1="532.2578" y2="545.2578"/><line style="stroke:#E7E7E7;stroke-width:1;stroke-dasharray:2.0,2.0;" x1="79.9946" x2="120.9946" y1="545.2578" y2="545.2578"/><polygon fill="#E7E7E7" points="89.9946,541.2578,79.9946,545.2578,89.9946,549.2578,85.9946,545.2578" style="stroke:#E7E7E7;stroke-width:1;"/><text fill="#FFFFFF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="61.8896" x="85.9946" y="527.1919">descartar</text></g><path d="M40,588.2578 L284.7163,588.2578 L284.7163,595.3906 L274.7163,605.3906 L40,605.3906 L40,588.2578" fill="#555555" style="stroke:#FFFFFF;stroke-width:1.5;"/><rect fill="none" height="146.6641" style="stroke:#FFFFFF;stroke-width:1.5;" width="263.6421" x="40" y="588.2578"/><text fill="#FFFFFF" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="199.7163" x="55" y="601.3247">Procesamiento y respuesta</text><g class="message" data-participant-1="ESP" data-participant-2="ESP"><line style="stroke:#E7E7E7;stroke-width:1;stroke-dasharray:2.0,2.0;" x1="78.9946" x2="120.9946" y1="626.5234" y2="626.5234"/><line style="stroke:#E7E7E7;stroke-width:1;stroke-dasharray:2.0,2.0;" x1="120.9946" x2="120.9946" y1="626.5234" y2="639.5234"/><line style="stroke:#E7E7E7;stroke-width:1;stroke-dasharray:2.0,2.0;" x1="79.9946" x2="120.9946" y1="639.5234" y2="639.5234"/><polygon fill="#E7E7E7" points="89.9946,635.5234,79.9946,639.5234,89.9946,643.5234,85.9946,639.5234" style="stroke:#E7E7E7;stroke-width:1;"/><text fill="#FFFFFF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="119.7168" x="85.9946" y="621.4575">generar respuesta</text></g><g class="message" data-participant-1="ESP" data-participant-2="MDM"><polygon fill="#E7E7E7" points="244.834,664.6563,254.834,668.6563,244.834,672.6563,248.834,668.6563" style="stroke:#E7E7E7;stroke-width:1;"/><line style="stroke:#E7E7E7;stroke-width:1;" x1="78.9946" x2="250.834" y1="668.6563" y2="668.6563"/><text fill="#FFFFFF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="141.521" x="85.9946" y="663.5903">AT+CMGS="&lt;from&gt;"</text></g><g class="message" data-participant-1="ESP" data-participant-2="MDM"><polygon fill="#E7E7E7" points="244.834,693.7891,254.834,697.7891,244.834,701.7891,248.834,697.7891" style="stroke:#E7E7E7;stroke-width:1;"/><line style="stroke:#E7E7E7;stroke-width:1;" x1="78.9946" x2="250.834" y1="697.7891" y2="697.7891"/><text fill="#FFFFFF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="138.5122" x="85.9946" y="692.7231">&lt;respuesta&gt; + 0x1A</text></g><g class="message" data-participant-1="MDM" data-participant-2="ESP"><polygon fill="#E7E7E7" points="89.9946,722.9219,79.9946,726.9219,89.9946,730.9219,85.9946,726.9219" style="stroke:#E7E7E7;stroke-width:1;"/><line style="stroke:#E7E7E7;stroke-width:1;stroke-dasharray:2.0,2.0;" x1="83.9946" x2="255.834" y1="726.9219" y2="726.9219"/><text fill="#FFFFFF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="18.7573" x="95.9946" y="721.856">OK</text></g><!--SRC=[VL7TIiCm5BxFKnnsfMoETWfAQIlpbwBLiSvh2UdP2AH9IR8nVHkVmKVOYosfrR5kIA6ddE_dV7ort0g4os4ul802sH8bupI28Y_WXfTS8sDSIIe8gQcsdF6QIWltnUHy1DJuZpsWoFAh87ZsK7wN4xBGQbb39XrE1V-aZ6- -9G6lWxFKSo22yQn_cpy-9E4nu2NFaj4W70J-8IZBrdEA3El6peTrIg5KxKPhuJpyZ40WQdWRJsSDHeK5NA6q2jpDMTOiZyQP9Z4lrsbByCZEiy4ZAAbLfhr-UDZLOf1gYETQLUa0uieiqgDCZHMtBXE-hrn9fJevlGPecJxmQlFbr-scgsQ26Zxdp9ro5reI2eF0vV_A4erJMQf_HQxStVJlNTqJhHWQMl6ckm-NsTHBD9QIhki29MeNve2nts-Hz7wQwNNn-4-PGX-2TJWctH_m-kIZRG40]--></g></svg>